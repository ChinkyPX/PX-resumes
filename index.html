<!DOCTYPE html>
<html>
<head>
  <title>Upload Resume</title>
</head>
<body>
<h2>Upload Your Resume</h2>

<form id="uploadForm">
  <label>Name:</label><br>
  <input type="text" id="name" required><br><br>

  <label>Email:</label><br>
  <input type="email" id="email" required><br><br>

  <label>Phone:</label><br>
  <input type="text" id="phone" required><br><br>

  <label>Location:</label><br>
  <input type="text" id="location" required><br><br>

  <label>Upload Resume:</label><br>
  <input type="file" id="file" required><br><br>

  <button type="submit">Submit</button>
</form>

<script>
const scriptURL = "https://script.google.com/macros/s/AKfycbw4-SReCZ2JrlSYzv4r1HuT0Q4Vj97rvSH8HISrGPqxRzWUHz6-CL3msoQK0dbmCjv8/exec";

document.getElementById("uploadForm").addEventListener("submit", async (e) => {
  e.preventDefault();

  const fileInput = document.getElementById("file").files[0];
  const reader = new FileReader();

  reader.onload = async function () {
    const base64Data = reader.result.split(',')[1];

    const formData = new FormData();
    formData.append("filename", fileInput.name);
    formData.append("mimetype", fileInput.type);
    formData.append("filedata", base64Data);

    formData.append("data", JSON.stringify({
      name: document.getElementById("name").value,
      email: document.getElementById("email").value,
      phone: document.getElementById("phone").value,
      location: document.getElementById("location").value // NEW FIELD
    }));

    const response = await fetch(scriptURL, {
      method: "POST",
      body: formData,
    });

    const result = await response.json();
    alert(result.status === "success" ? "Resume submitted successfully!" : "Error: " + result.message);
  };

  reader.readAsDataURL(fileInput);
});
</script>

</body>
</html>
